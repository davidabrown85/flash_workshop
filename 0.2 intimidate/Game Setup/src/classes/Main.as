package classes{	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.events.Event;	import com.greensock.loading.XMLLoader;	import com.greensock.loading.LoaderMax;	import com.greensock.TweenLite;			public class Main extends MovieClip	{				private var xml_loader:XMLLoader;		private var language_xml:XML;				public var language:String = "en";				private var current_screen:MovieClip;				public function Main() 		{			init();		}		public function init():void		{			change_lang( language );						change_screen( ScreenConstants.SCREEN_INTRO );		}		public function change_screen( new_room:String ):void		{			var new_screen:MovieClip;						switch( new_room )			{				case ScreenConstants.SCREEN_INTRO: new_screen = new ScreenIntro(); break;				case ScreenConstants.SCREEN_GAME: new_screen = new ScreenGame(); break;				case ScreenConstants.SCREEN_END: new_screen = new ScreenEnd(); break;				default: trace( "could not find a public '"+new_room+"+' variable" ); break;			}									if( language_xml )				new_screen.setup_text( language_xml, language );						addChildAt( new_screen, 0 );						new_screen.init( this );						if( current_screen )			{ 				current_screen.clean_up();				removeChild( current_screen ); 			}						current_screen = new_screen;		}								public function change_lang( new_lang:String ):void		{						language = new_lang;						xml_loader = new XMLLoader( "xml/language_" + new_lang + ".xml", { name:"xmlDoc", onComplete:xml_loaded } );			xml_loader.autoDispose = true;			xml_loader.load();		}						private function xml_loaded( ev:Event ):void		{			language_xml = XML( LoaderMax.getContent( "xmlDoc" ) );						if( current_screen )				current_screen.setup_text( language_xml, language );		}	}	}