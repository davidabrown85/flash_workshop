/*http://www.spikything.com/blog/index.php/2007/10/09/webcam-motion-detection-in-as3/*/package classes{	import flash.display.Sprite;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.display.BitmapData;	import flash.display.Bitmap;	import flash.utils.setInterval;	import flash.utils.clearInterval;	import flash.text.TextField;	import flash.media.Camera;	import flash.media.Video;	import flash.geom.Point;	import flash.geom.Rectangle;	import flash.events.ActivityEvent;	import flash.events.Event;	public class MotionCam extends Sprite	{		private var cam:Camera;		private var video:Video;		private var now:BitmapData;		private var out:BitmapData;		private var diff:BitmapData;		private var prev:BitmapData;		private var label:TextField;		private var myInt:Number;		private var camFPS:Number = 15;		private var camW:Number = 250;		private var camH:Number = 190;				public var output:Bitmap;				public static const CAMERA_READY:String = "camera_ready";		public function MotionCam()		{		}		public function init():void		{			cam = Camera.getCamera();			cam.setMode(camW, camH, camFPS);			cam.addEventListener( ActivityEvent.ACTIVITY, addCamera )									if (cam == null)			{				label = new TextField();				label.text = "NO WEBCAM";				addChild(label);			}			else			{				video = new Video(cam.width,cam.height);				video.attachCamera(cam);			}		}				private function addCamera( ev:Event ):void		{			cam.removeEventListener( ActivityEvent.ACTIVITY, addCamera );			 			trace("ACTIVATED");						//addChild(video);				now = new BitmapData(video.width,video.height);			prev = new BitmapData(video.width,video.height);			out = new BitmapData(video.width,video.height);			diff = new BitmapData(video.width,video.height);					output = new Bitmap(out);			output.width = stage.stageWidth;			output.height = stage.stageHeight;			output.scaleX *= -1;			output.x += output.width;			addChild( output );						dispatchEvent( new Event( MotionCam.CAMERA_READY ) );			//var previous = addChild(new Bitmap(prev));			//previous.x = video.width;			//addChild(previous)						//var diffBitmap = addChild(new Bitmap(diff));			//diffBitmap.y = video.height;				//var output = addChild(new Bitmap(out));			//output.x = video.width;			//output.y = video.height;				myInt = setInterval(render,2000 / camFPS);		}						private function render():void		{			//if (!cam.currentFPS) return;			now.draw(video);						diff.draw(video);						diff.draw(prev,null,null,"difference");						out.fillRect(new Rectangle(0,0,out.width,out.height),0x00000000);			out.threshold(diff, new Rectangle(0,0,diff.width,diff.height), new Point(0,0), ">", 0xFF333333, 0xFFFF0000);						prev.draw(video);		}		}}